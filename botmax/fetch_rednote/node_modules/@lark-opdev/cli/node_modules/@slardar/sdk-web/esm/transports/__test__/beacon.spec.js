import test from 'ava';
import sinon from 'sinon';
import { getBeaconTransport } from '../beacon';
test.serial('beaconTransport - not supported', function (t) {
    var navigator = {};
    var win = {
        navigator: navigator,
    };
    // @ts-expect-error
    global.window = win;
    t.notThrows(function () {
        var beaconTransport = getBeaconTransport();
        beaconTransport.get();
        beaconTransport.post('url', 'some data');
    });
});
test.serial('beaconTransport', function (t) {
    var fake = sinon.fake();
    var navigator = {
        sendBeacon: fake,
    };
    var win = {
        navigator: navigator,
    };
    // @ts-expect-error
    global.window = win;
    var beaconTransport = getBeaconTransport();
    // no effect
    beaconTransport.get();
    t.assert(fake.notCalled);
    beaconTransport.post('url', 'some data');
    t.assert(fake.calledOnce);
    t.deepEqual(fake.args[0], ['url', 'some data']);
});
//# sourceMappingURL=beacon.spec.js.map