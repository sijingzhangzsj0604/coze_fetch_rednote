"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const base_1=__importDefault(require("../base"));function isVscode(e){return e&&"function"==typeof e.postMessage}class WebBridge extends base_1.default{constructor(e,s,t){let o,i;isVscode(e)?(o=e,i=[s,t]):i=[e,s],o=o||(window.acquireVsCodeApi||acquireVsCodeApi)(),super(i[0],i[1],!1),this.vscode=o,this.onmessage()}getVscode(){return this.vscode}postMessage(e){this.vscode.postMessage(e)}onmessage(){this.vscode&&this.vscode.onmessage?this.vscode.onmessage(this.messageHandler):window.addEventListener("message",e=>{this.messageHandler(e.data)})}}exports.default=WebBridge;