"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMetadataManager = exports.createConstructorMetadataManager = void 0;
require("reflect-metadata");
function findConstructor(target) {
    return typeof target === 'object' ? target.constructor : target;
}
function getConstructorMetadata(metadataKey, target, propertyKey) {
    var constructor = findConstructor(target);
    if (propertyKey == null) {
        return Reflect.getMetadata(metadataKey, constructor);
    }
    else {
        return Reflect.getMetadata(metadataKey, constructor, propertyKey);
    }
}
function defineConstructorMetadata(metadataKey, metadataValue, target, propertyKey) {
    var constructor = findConstructor(target);
    if (propertyKey == null) {
        return Reflect.defineMetadata(metadataKey, metadataValue, constructor);
    }
    else {
        return Reflect.defineMetadata(metadataKey, metadataValue, constructor, propertyKey);
    }
}
function createConstructorMetadataManager(metadataKey) {
    return {
        get: function (target, propertyKey) {
            return getConstructorMetadata(metadataKey, target, propertyKey);
        },
        set: function (metadataValue, target, propertyKey) {
            return defineConstructorMetadata(metadataKey, metadataValue, target, propertyKey);
        },
    };
}
exports.createConstructorMetadataManager = createConstructorMetadataManager;
function createMetadataManager(metadataKey) {
    return {
        get: function (target, propertyKey) {
            if (propertyKey == null) {
                return Reflect.getMetadata(metadataKey, target);
            }
            else {
                return Reflect.getMetadata(metadataKey, target, propertyKey);
            }
        },
        set: function (metadataValue, target, propertyKey) {
            if (propertyKey == null) {
                return Reflect.defineMetadata(metadataKey, metadataValue, target);
            }
            else {
                return Reflect.defineMetadata(metadataKey, metadataValue, target, propertyKey);
            }
        },
    };
}
exports.createMetadataManager = createMetadataManager;
