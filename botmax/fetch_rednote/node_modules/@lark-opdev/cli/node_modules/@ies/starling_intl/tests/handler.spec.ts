import I18n from '../src';

function init() {
  return I18n
    .init({
      keySeparator: false,
      react: { useSuspense: false },
      resources: {
        zh: {
          translation: {
            richText: '<a href="{uri}">Hello</a>',
            paramText: 'Hello {name}'
          }
        }
      },
      icuConfig: {
        formatOptions: {
          ignoreTag: true
        }
      },
      lng: 'zh',
      fallbackLng: ['zh'],
      missingInterpolationHandler() {
        return '"yes"';
      }
    });
}

describe('Handler', () => {
  beforeAll(init);

  it('忽略富文本标签', () => {
    expect(I18n.t('richText', { uri: 'xxx' })).toBe('<a href="xxx">Hello</a>')
  });

  it('插值 missing 兜底', () => {
    expect(I18n.t('paramText')).toBe('Hello "yes"');
  });
});