"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAppId=exports.getProjectName=exports.getProjectItem=exports.checkAppType=exports.getAppType=void 0;const path_1=__importDefault(require("path")),fs_extra_1=__importDefault(require("fs-extra")),simulator_1=require("../../../types/simulator"),isApp=e=>!Array.isArray(e.blocks);function getAppType(e){return fs_extra_1.default.existsSync(path_1.default.join(e,"project.config.json"))?simulator_1.CompilePathType.sourceCode:fs_extra_1.default.existsSync(path_1.default.join(e,"app-config.json"))?simulator_1.CompilePathType.compiledCode:/\.ttpkg\.js$/.test(path_1.default.basename(e))?simulator_1.CompilePathType.pkgFile:simulator_1.CompilePathType.unknown}function checkAppType(e){let t=getAppType(e);if(t===simulator_1.CompilePathType.sourceCode)try{const p=fs_extra_1.default.readJSONSync(path_1.default.join(e,"project.config.json"));t=isApp(p)?simulator_1.CompilePathType.sourceCode:simulator_1.CompilePathType.unknown}catch(e){t=simulator_1.CompilePathType.unknown}return Promise.resolve(t)}function getProjectItem(e,t){let p="";const o=getAppType(e);try{switch(o){case simulator_1.CompilePathType.sourceCode:p=fs_extra_1.default.readJSONSync(path_1.default.join(e,"project.config.json"))[t];break;case simulator_1.CompilePathType.compiledCode:p=fs_extra_1.default.readJSONSync(path_1.default.join(e,"app-config.json")).page["project.config"].window[t];break;default:p=path_1.default.basename(e)}}catch(e){p="unknown"}return p}function getProjectName(e){return getProjectItem(e,"projectname")}function getAppId(e){return getProjectItem(e,"appid")}exports.getAppType=getAppType,exports.checkAppType=checkAppType,exports.getProjectItem=getProjectItem,exports.getProjectName=getProjectName,exports.getAppId=getAppId;