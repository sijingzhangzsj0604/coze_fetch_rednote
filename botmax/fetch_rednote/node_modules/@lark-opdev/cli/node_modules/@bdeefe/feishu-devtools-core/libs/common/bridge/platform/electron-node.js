"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const base_1=__importDefault(require("../base"));class NodeBridge extends base_1.default{constructor(e,t,s,a){super(s,a,!1),this.cacheData=[],this.socket=e,this.channel=t,this.onmessage()}getSocket(){return this.socket}postMessage(e){try{this.event&&this.event.sender&&this.channel?this.event.sender.send(this.channel,e):this.cacheData.push(e)}catch(e){console.log(e)}}onmessage(){this.socket.on(this.channel,(e,t)=>{this.messageHandler(t),this.event=e;const s=[...this.cacheData];this.cacheData=[],s.forEach(e=>{this.postMessage(e)})})}}exports.default=NodeBridge;