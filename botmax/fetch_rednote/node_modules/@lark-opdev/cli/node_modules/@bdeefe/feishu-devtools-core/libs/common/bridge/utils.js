"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hightOrderSdk=exports.AbstractSdk=void 0;const common_error_1=require("../common-error"),compile_error_1=require("../compile-error"),request_error_1=require("../request-error"),unknown_error_1=require("../unknown-error");class AbstractSdk{exec(r,e,o){return this[r](e,o)}}function errorHandler(r){return(0,request_error_1.isRequestError)(r)||(0,compile_error_1.isCompileError)(r)||(0,unknown_error_1.isUnknownError)(r)||(0,common_error_1.isCommonError)(r)?{type:r.type,message:JSON.stringify(r.IPCFormat())}:void 0===r||r instanceof Error?{message:r?r.stack||r.message:"default catch"}:r}function hightOrderSdk(r,e=errorHandler){return(o,t,s)=>{try{const e=r.exec(o,t,s);e instanceof Promise?e.then(r=>s.invoke(t.success,r),r=>s.invoke(t.fail,errorHandler(r))):s.invoke(t.success,e)}catch(r){s.invoke(t.fail,e(r))}}}exports.AbstractSdk=AbstractSdk,exports.hightOrderSdk=hightOrderSdk;