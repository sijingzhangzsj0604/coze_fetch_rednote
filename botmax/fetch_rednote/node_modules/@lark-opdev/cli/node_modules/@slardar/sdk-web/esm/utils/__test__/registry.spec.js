import test from 'ava';
import { getDefaultBrowser } from '../defaults';
import { getGlobalRegistry, reportSelfError } from '../registry';
var browserEnv = require('browser-env');
test.before(function () {
    browserEnv();
});
test('getGlobalRegistry', function (t) {
    t.is(getGlobalRegistry(), undefined);
    var global = {};
    var r = getGlobalRegistry(global);
    t.deepEqual(r, {
        plugins: [],
        errors: [],
        subject: {},
    });
    t.is(r, global.__SLARDAR_REGISTRY__['Slardar']);
});
test('reportSelfError', function (t) {
    var err1 = new Error('1');
    var registry = getGlobalRegistry(getDefaultBrowser());
    reportSelfError(err1);
    t.deepEqual(registry === null || registry === void 0 ? void 0 : registry.errors, [[err1]]);
    var err2 = new Error('2');
    reportSelfError(err2);
    t.deepEqual(registry === null || registry === void 0 ? void 0 : registry.errors, [[err1], [err2]]);
});
//# sourceMappingURL=registry.spec.js.map