import test from 'ava';
import { createContextAgent } from '../context';
test('contextAgent', function (t) {
    var ctx = createContextAgent();
    t.deepEqual(ctx.toString(), {});
    ctx.set('a', 1).set('b', 2).set('c', 3);
    t.deepEqual(ctx.toString(), { a: '1', b: '2', c: '3' });
    ctx.merge({ d: 2, e: 2 });
    t.deepEqual(ctx.toString(), { a: '1', b: '2', c: '3', d: '2', e: '2' });
    ctx.delete('b').set('d', 2);
    t.deepEqual(ctx.toString(), { a: '1', c: '3', d: '2', e: '2' });
    t.is(ctx.get('b'), undefined);
    t.is(ctx.get('d'), '2');
    var cycle = { a: null };
    cycle.a = cycle;
    ctx.set('cyc', cycle);
    t.true(ctx.get('cyc').includes('[FAILED_TO_STRINGIFY]'));
    t.is(ctx.get('d'), '2');
    t.is(ctx.get('a'), '1');
    t.deepEqual(ctx.clear().toString(), {});
});
//# sourceMappingURL=context.spec.js.map