import test from 'ava';
import { parseUrl, getLocationUrl, getFullUrl } from '../url';
var browserEnv = require('browser-env');
test.serial('urlParser w/o document', function (t) {
    t.falsy(global.window);
    var url = 'https://slardar.bytedance.net/node/app_detail/?aid=13&os=Android&region=cn&bid=&pid=#/alarm/newevent';
    t.deepEqual(parseUrl(url), {
        url: url,
        protocol: '',
        domain: '',
        query: '',
        path: '',
        hash: '',
    });
});
test.serial('getFullUrl w/o document', function (t) {
    t.falsy(global.window);
    var url = 'https://slardar.bytedance.net/node/app_detail/?aid=13&os=Android&region=cn&bid=&pid=#/alarm/newevent';
    t.is(getFullUrl(url), '');
});
test.serial('getLocaltionurl - w/o window', function (t) {
    t.falsy(global.window);
    t.deepEqual(getLocationUrl(), undefined);
});
test.serial('urlParser', function (t) {
    browserEnv();
    var url = 'https://slardar.bytedance.net/node/app_detail/?aid=13&os=Android&region=cn&bid=&pid=#/alarm/newevent';
    t.deepEqual(parseUrl(url), {
        url: 'https://slardar.bytedance.net/node/app_detail/?aid=13&os=Android&region=cn&bid=&pid=#/alarm/newevent',
        protocol: 'https',
        domain: 'slardar.bytedance.net',
        path: '/node/app_detail/',
        query: 'aid=13&os=Android&region=cn&bid=&pid=',
        hash: '#/alarm/newevent',
    });
});
test.serial('getFullUrl', function (t) {
    browserEnv();
    var url = 'https://slardar.bytedance.net/node/app_detail/?aid=13&os=Android&region=cn&bid=&pid=#/alarm/newevent';
    t.is(getFullUrl(url), 'https://slardar.bytedance.net/node/app_detail/?aid=13&os=Android&region=cn&bid=&pid=#/alarm/newevent');
});
test.serial('getLocaltionurl - w/ window', function (t) {
    browserEnv();
    t.assert(global.window);
    t.assert(global.window.location);
    t.deepEqual(getLocationUrl(), 'about:blank');
    // further test
    // cannot change location in jsdom
});
//# sourceMappingURL=url.spec.js.map