"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Task{constructor(s,t=!0){this.hasInit=!1,this.task=[],this.target=s,this.debug=t,s.addEventListener("dom-ready",()=>{this.clearTask()})}clearTask(){const s=this.task.shift();s?(this.send(s.data),this.task.length?setTimeout(()=>{this.clearTask()},this.task[0].time-s.time):this.hasInit=!0):this.hasInit=!0}send(s){var t;try{null===(t=this.target)||void 0===t||t.send("channel",s)}catch(t){this.hasInit=!1,this.postMessge(s)}this.debug&&console.warn(Task.message,s)}postMessge(s){this.hasInit?this.send(s):this.task.push({time:Date.now(),data:s})}}exports.default=Task,Task.message="send data to ifarme";